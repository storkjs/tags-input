<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<link rel="stylesheet" type="text/css" href="../dist/tags-input.min.css">
	<link rel="stylesheet" type="text/css" href="../dist/simple-theme.min.css">

	<script src="../bower_components/stork-shims/dist/shims.min.js"></script>
	<script src="../src/tags-input.js"></script>
	<script src="suggestions.js"></script>

	<style type="text/css">
		* {
			box-sizing: border-box;
		}
		html, body {
			height: 100%;
		}
		body, #parentOne, #parentTwo {
			display: flex;
			justify-content: center;
			align-items: flex-start;
			margin: 20px 0 0 0;
		}

		#parentOne {
			height: 95%;
			padding-top: 70px;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		#parentTwo {
			display: flex;
			justify-content: center;
			align-items: flex-start;

			position: relative;
			height: 95%;
			padding-top: 50px;
			border-top: 1px solid #d0d0d0;
		}
		#tagsInput {
			width: 500px;
			height: 32px;
		}
	</style>

	<script>
		var i, j, regex;
		var suggestions_handler = function suggestions_handler(text, chosenTags, callback) {
			text = text.trim();

			regex = new RegExp(text, 'gi');
			var ret = [];

			if(text.length > 0) { // perform search only on text
				for(i=0; i < suggestionGroups.length; i++) {
					for(j=0; j < suggestionGroups[i].items.length; j++) {
						if(regex.test(suggestionGroups[i].items[j].label)) {
							if(!ret.last || ret.last.field !== suggestionGroups[i].field) {
								ret.push({
									label: suggestionGroups[i].label,
									field: suggestionGroups[i].field,
									items: []
								});
							}
							ret.last.items.push({
								label: suggestionGroups[i].items[j].label,
								value: suggestionGroups[i].items[j].value
							});
						}
					}
				}
			}

			callback(ret);
		};

		var testTags;
		document.addEventListener("DOMContentLoaded", function(e) {
			testTags = new storkTagsInput({
				element: document.getElementById('tagsInput'),
				suggestionsHandler: suggestions_handler,
				rechooseRemove: true,
				inputMinWidth: 70,
				placeholder: 'Search Something'
			});

			testTags.addTag({ value: 'USD', label: 'US Dollar', groupField: 'currencies', groupLabel: 'Currencies' });
			testTags.addTag({ value: 'EUR', groupField: 'currencies' });

			testTags.addEventListener('tag-added', function(e) {
				console.log('added tag:', e.detail);
			}, false);
			testTags.addEventListener('tag-removed', function(e) {
				console.log('removed tag:', e.detail);
			}, false);
		});
	</script>
</head>
<body>
<div id="parentOne">
	<div id="parentTwo">
		<div id="tagsInput"></div>
	</div>
</div>
</body>
</html>