!function(root){"use strict";var getPosition=function(elm){for(var xPos=0,yPos=0;elm;)xPos+=elm.offsetLeft,yPos+=elm.offsetTop,elm=elm.offsetParent;return{x:xPos,y:yPos}},storkTagsInput=function(options){this.tagsInput=options.element,this.suggestionsHandler=options.suggestionsHandler,this.rnd||(this.rnd=1e3*(Math.floor(9*Math.random())+1)+Date.now()%1e3),this.rechooseRemove=options.rechooseRemove||!1,this.chosenTags=[],this.tagsInput.classList.add("stork-tags","stork-tags"+this.rnd),this.buildDom(),this.setEventListeners(),this.updateWidths()};storkTagsInput.prototype.buildDom=function(){var ul=document.createElement("ul"),li=document.createElement("li"),input=document.createElement("input");li.classList.add("search"),li.appendChild(input),ul.appendChild(li),this.tagsInput.appendChild(ul);var dropdownContainer=document.createElement("div");dropdownContainer.classList.add("stork-tags-dropdown-container","stork-tags-dropdown-container"+this.rnd),dropdownContainer.style.display="none",dropdownContainer.style.width=this.tagsInput.offsetWidth+"px";var xy=getPosition(this.tagsInput);dropdownContainer.style.left=xy.x+"px",dropdownContainer.style.top=xy.y+this.tagsInput.offsetHeight+1+"px",this.ul=ul,this.input=input,this.dropdownContainer=dropdownContainer,document.body.appendChild(dropdownContainer)},storkTagsInput.prototype.setEventListeners=function(){var self=this;this.input.addEventListener("keyup",function(e){this.value.length&&self.suggestionsHandler(this.value,self.suggestionsCallback.bind(self))},!1),this.dropdownContainer.addEventListener("click",this.onClickSuggestionsDropdown.bind(this),!1)},storkTagsInput.prototype.updateWidths=function(){this.maxWidth||(this.maxWidth=this.tagsInput.clientWidth),this.input.parentNode.style.width=this.maxWidth+"px"},storkTagsInput.prototype.suggestionsCallback=function(suggestionsObj){if(0===suggestionsObj.length)return void(this.dropdownContainer.style.display="none");for(this.dropdownContainer.style.display="block";this.dropdownContainer.firstChild;)this.dropdownContainer.removeChild(this.dropdownContainer.firstChild);var i,j,groupDiv,groupHeader,itemsList,item,miscElm;for(i=0;i<suggestionsObj.length;i++){for(groupDiv=document.createElement("div"),groupHeader=document.createElement("div"),miscElm=document.createElement("span"),itemsList=document.createElement("ul"),miscElm.appendChild(document.createTextNode(suggestionsObj[i].displayName)),groupHeader.appendChild(miscElm),j=0;j<suggestionsObj[i].items.length;j++)item=document.createElement("li"),miscElm=document.createElement("a"),miscElm.storkTagsProps={value:suggestionsObj[i].items[j].value,displayName:suggestionsObj[i].items[j].displayName,groupId:suggestionsObj[i].id,groupDisplayName:suggestionsObj[i].displayName},miscElm.appendChild(document.createTextNode(suggestionsObj[i].items[j].displayName)),item.appendChild(miscElm),itemsList.appendChild(item);groupDiv.appendChild(groupHeader),groupDiv.appendChild(itemsList),this.dropdownContainer.appendChild(groupDiv)}},storkTagsInput.prototype.onClickSuggestionsDropdown=function(e){for(var A=e.target,i=0;"A"!==A.tagName.toUpperCase();){if(i++>=2)return;A=A.parentNode}this.addTag(A.storkTagsProps)},storkTagsInput.prototype.addTag=function(tagObj){var i;for(i=0;i<this.chosenTags.length;i++)if(tagObj.groupId===this.chosenTags[i].groupId&&tagObj.value===this.chosenTags[i].value)return this.rechooseRemove?this.removeTag(i):!1;var li=document.createElement("li"),xA=document.createElement("a"),textSpan=document.createElement("span");xA.appendChild(document.createTextNode("Ã—")),textSpan.appendChild(document.createTextNode(tagObj.groupDisplayName+" : "+tagObj.displayName)),li.classList.add("tag"),xA.classList.add("remove"),this.chosenTags.push({value:tagObj.value,displayName:tagObj.displayName,groupId:tagObj.groupId,groupDisplayName:tagObj.groupDisplayName,elm:li}),li.storkTagsProps={index:this.chosenTags.length-1},li.appendChild(xA),li.appendChild(textSpan),this.ul.insertBefore(li,this.input.parentNode)},storkTagsInput.prototype.removeTag=function(index){return this.chosenTags[index]?(this.chosenTags[index].elm.parentNode.removeChild(this.chosenTags[index].elm),this.chosenTags.splice(index,1),!0):!1},root.storkTagsInput=storkTagsInput}(this);
//# sourceMappingURL=tags-input.min.js.map